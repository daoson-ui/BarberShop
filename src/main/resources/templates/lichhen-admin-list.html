<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Danh s√°ch L·ªãch h·∫πn (Admin)</title>

    <style>
        body { 
            font-family: Arial; 
            padding: 20px; 
            background: #f4f4f4;
        }

        h2 { 
            color: #1976d2; 
            text-align: center;
            margin-bottom: 20px;
        }

        table { 
            width: 100%; 
            border-collapse: collapse; 
            background: white;
        }

        table, th, td { 
            border: 1px solid #ddd; 
        }

        th, td { 
            padding: 12px; 
        }

        th { 
            background: #1976d2; 
            color: white; 
        }

        .btn {
            padding: 6px 10px;
            border-radius: 6px;
            text-decoration: none;
            color: white;
            font-weight: bold;
        }

        .btn-delete { background: #d9534f; }
        .btn-delete:hover { background: #b52b27; }

        .alert {
            padding: 12px;
            border-radius: 6px;
            margin-bottom: 15px;
            text-align: center;
            font-weight: bold;
        }

        .alert-success {
            background: #e0ffe6;
            border: 1px solid #009933;
            color: #006622;
        }

        .alert-error {
            background: #ffe0e0;
            border: 1px solid #cc0000;
            color: #990000;
        }

        .back-btn {
            margin-top: 20px;
            display: inline-block;
            padding: 10px 14px;
            background: #1976d2;
            color: white;
            border-radius: 6px;
            text-decoration: none;
        }

        .back-btn:hover { background: #0d47a1; }
    </style>
</head>

<body>

<h2>Danh s√°ch L·ªãch h·∫πn (Admin)</h2>

<!-- Th√¥ng b√°o -->
<div th:if="${successMsg}" class="alert alert-success" th:text="${successMsg}"></div>
<div th:if="${errorMsg}" class="alert alert-error" th:text="${errorMsg}"></div>

<table>
    <tr>
        <th>M√£</th>
        <th>Khung gi·ªù</th>
        <th>Kh√°ch h√†ng</th>
        <th>Nh√¢n vi√™n</th>
        <th>D·ªãch v·ª•</th>
        <th>Thao t√°c</th>
    </tr>

    <tr th:each="lh : ${listLichHen}">
        <td th:text="${lh.maLh}"></td>

        <td th:text="${#temporals.format(lh.ngayGioBatDau, 'dd/MM/yyyy HH:mm')}"></td>

        <td th:text="${lh.khachHang != null ? lh.khachHang.hoTen : 'Kh√¥ng c√≥'}"></td>

        <td th:text="${lh.nhanVien != null ? lh.nhanVien.hoTen : 'Kh√¥ng c√≥'}"></td>


        <td>
            <span th:if="${#lists.isEmpty(mapDichVu[lh.maLh])}">
                Kh√¥ng c√≥
            </span>

            <span th:each="dv : ${mapDichVu[lh.maLh]}">
                ‚Ä¢ <b th:text="${dv.dichVu.tenDv}"></b><br>
            </span>
        </td>

        <td>
            <a th:href="@{'/admin/lichhen/delete/' + ${lh.maLh}}"
               class="btn btn-delete"
               onclick="return confirm('B·∫°n c√≥ ch·∫Øc mu·ªën x√≥a l·ªãch h·∫πn n√†y?')">
                üóë X√≥a
            </a>
        </td>
    </tr>
</table>

<a href="/admin/home" class="back-btn">‚Üê Quay l·∫°i Dashboard</a>

<script>
setTimeout(() => {
    document.querySelectorAll(".alert").forEach(a => a.style.display = 'none');
}, 2000);
</script>

</body>
</html>
